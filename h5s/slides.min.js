var PERMANENT_URL_PREFIX="h5s/",SLIDE_CLASSES=["far-past","past","current","next","far-next"],PM_TOUCH_SENSITIVITY=15;if("undefined"==typeof SLIDESHOW_MODE)var SLIDESHOW_MODE=1;var curSlide;
"undefined"!==typeof document&&!("classList"in document.createElement("a"))&&function(a){var a=(a.HTMLElement||a.Element).prototype,b=Object;strTrim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};arrIndexOf=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};DOMEx=function(a,b){this.name=a;this.code=DOMException[a];this.message=b};checkTokenAndGetIndex=function(a,b){if(""===b)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");
if(/\s/.test(b))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(a,b)};ClassList=function(a){for(var b=strTrim.call(a.className),b=b?b.split(/\s+/):[],c=0,d=b.length;c<d;c++)this.push(b[c]);this._updateClassName=function(){a.className=this.toString()}};classListProto=ClassList.prototype=[];classListGetter=function(){return new ClassList(this)};DOMEx.prototype=Error.prototype;classListProto.item=function(a){return this[a]||null};classListProto.contains=
function(a){return-1!==checkTokenAndGetIndex(this,a+"")};classListProto.add=function(a){a+="";-1===checkTokenAndGetIndex(this,a)&&(this.push(a),this._updateClassName())};classListProto.remove=function(a){a=checkTokenAndGetIndex(this,a+"");-1!==a&&(this.splice(a,1),this._updateClassName())};classListProto.toggle=function(a){a+="";-1===checkTokenAndGetIndex(this,a)?this.add(a):this.remove(a)};classListProto.toString=function(){return this.join(" ")};if(b.defineProperty){var c={get:classListGetter,enumerable:!0,
configurable:!0};try{b.defineProperty(a,"classList",c)}catch(d){if(-2146823252===d.number)c.enumerable=!1,b.defineProperty(a,"classList",c)}}else b.prototype.__defineGetter__&&a.__defineGetter__("classList",classListGetter)}(self);function getSlideEl(a){return 0>a||a>=slideEls.length?null:slideEls[a]}function updateSlideClass(a,b){var c=getSlideEl(a);if(c){b&&c.classList.add(b);for(var d in SLIDE_CLASSES)b!=SLIDE_CLASSES[d]&&c.classList.remove(SLIDE_CLASSES[d])}}
function updateSlides(){for(var a=0;a<slideEls.length;a++)switch(a){case curSlide-2:updateSlideClass(a,"far-past");break;case curSlide-1:updateSlideClass(a,"past");break;case curSlide:updateSlideClass(a,"current");break;case curSlide+1:updateSlideClass(a,"next");break;case curSlide+2:updateSlideClass(a,"far-next");break;default:updateSlideClass(a)}triggerLeaveEvent(curSlide-1);triggerEnterEvent(curSlide);window.setTimeout(function(){disableSlideFrames(curSlide-2)},301);enableSlideFrames(curSlide-
1);enableSlideFrames(curSlide+2);isChromeVoxActive()&&speakAndSyncToNode(slideEls[curSlide]);updateHash()}function buildNextItem(){var a=slideEls[curSlide].querySelectorAll(".to-build");if(!a.length)return!1;a[0].classList.remove("to-build","");isChromeVoxActive()&&speakAndSyncToNode(a[0]);return!0}function prevSlide(){SLIDESHOW_MODE&&0<curSlide&&(curSlide--,updateSlides())}function nextSlide(){SLIDESHOW_MODE&&!buildNextItem()&&curSlide<slideEls.length-1&&(curSlide++,updateSlides())}
function triggerEnterEvent(a){var b=getSlideEl(a);if(b){var c=b.getAttribute("onslideenter");c&&(new Function(c)).call(b);c=document.createEvent("Event");c.initEvent("slideenter",!0,!0);c.slideNumber=a+1;b.dispatchEvent(c)}}function triggerLeaveEvent(a){var b=getSlideEl(a);if(b){var c=b.getAttribute("onslideleave");c&&(new Function(c)).call(b);c=document.createEvent("Event");c.initEvent("slideleave",!0,!0);c.slideNumber=a+1;b.dispatchEvent(c)}}
function handleTouchStart(a){if(1==a.touches.length)touchDY=touchDX=0,touchStartX=a.touches[0].pageX,touchStartY=a.touches[0].pageY,document.body.addEventListener("touchmove",handleTouchMove,!0),document.body.addEventListener("touchend",handleTouchEnd,!0)}function handleTouchMove(a){1<a.touches.length?cancelTouch():(touchDX=a.touches[0].pageX-touchStartX,touchDY=a.touches[0].pageY-touchStartY)}
function handleTouchEnd(){var a=Math.abs(touchDX),b=Math.abs(touchDY);a>PM_TOUCH_SENSITIVITY&&b<2*a/3&&(0<touchDX?prevSlide():nextSlide());cancelTouch()}function cancelTouch(){document.body.removeEventListener("touchmove",handleTouchMove,!0);document.body.removeEventListener("touchend",handleTouchEnd,!0)}function disableSlideFrames(a){if(a=getSlideEl(a))for(var a=a.getElementsByTagName("iframe"),b=0,c;c=a[b];b++)disableFrame(c)}
function enableSlideFrames(a){if(a=getSlideEl(a))for(var a=a.getElementsByTagName("iframe"),b=0,c;c=a[b];b++)enableFrame(c)}function disableFrame(a){a.src="about:blank"}function enableFrame(a){var b=a._src;if(a.src!=b&&"about:blank"!=b)a.src=b}function setupFrames(){for(var a=document.querySelectorAll("iframe"),b=0,c;c=a[b];b++)c._src=c.src,disableFrame(c);enableSlideFrames(curSlide);enableSlideFrames(curSlide+1);enableSlideFrames(curSlide+2)}
function setupInteraction(){var a=document.createElement("div");a.className="slide-area";a.id="prev-slide-area";a.addEventListener("click",prevSlide,!1);document.querySelector("section.slides").appendChild(a);a=document.createElement("div");a.className="slide-area";a.id="next-slide-area";a.addEventListener("click",nextSlide,!1);document.querySelector("section.slides").appendChild(a);document.body.addEventListener("touchstart",handleTouchStart,!1)}
function isChromeVoxActive(){return"undefined"==typeof cvox?!1:!0}function speakAndSyncToNode(a){if(isChromeVoxActive()){cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0);cvox.ChromeVox.navigationManager.syncToNode(a);for(cvox.ChromeVoxUserCommands.finishNavCommand("");a.firstChild;)a=a.firstChild;cvox.ChromeVox.navigationManager.syncToNode(a)}}
function speakNextItem(){if(isChromeVoxActive()){cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0);cvox.ChromeVox.navigationManager.next(!0);if(!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){for(var a=slideEls[curSlide];a.firstChild;)a=a.firstChild;cvox.ChromeVox.navigationManager.syncToNode(a);cvox.ChromeVox.navigationManager.next(!0)}cvox.ChromeVoxUserCommands.finishNavCommand("")}}
function speakPrevItem(){if(isChromeVoxActive()){cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,!0);cvox.ChromeVox.navigationManager.previous(!0);if(!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){for(var a=slideEls[curSlide];a.lastChild;)a=a.lastChild;cvox.ChromeVox.navigationManager.syncToNode(a);cvox.ChromeVox.navigationManager.previous(!0)}cvox.ChromeVoxUserCommands.finishNavCommand("")}}
function getCurSlideFromHash(){var a=parseInt(location.hash.substr(1));if(a){if(1>a)a=1;else if(a>slideEls.length)a=slideEls.length;curSlide=a-1;activateSlideshow()}else curSlide=0}function handleHashChange(){var a=parseInt(location.hash.substr(1));if(SLIDESHOW_MODE)if(a){if(1>a)a=1;else if(a>slideEls.length)a=slideEls.length;for(;curSlide<a-1;)nextSlide();for(;curSlide>a-1;)prevSlide()}else deactivateSlideshow();else getCurSlideFromHash()}
function updateHash(){location.replace("#"+(curSlide+1))}function eraseHash(){location.replace("#")}
function handleBodyKeyDown(a){if(49==a.keyCode)SLIDESHOW_MODE?deactivateSlideshow():activateSlideshow(),a.preventDefault();else if(SLIDESHOW_MODE)switch(a.keyCode){case 39:case 32:case 13:case 34:nextSlide();a.preventDefault();break;case 37:case 8:case 33:prevSlide();a.preventDefault();break;case 40:isChromeVoxActive()?speakNextItem():nextSlide();a.preventDefault();break;case 38:isChromeVoxActive()?speakPrevItem():prevSlide(),a.preventDefault()}}
function addEventListeners(){document.addEventListener("keydown",handleBodyKeyDown,!1);window.addEventListener("hashchange",handleHashChange,!0)}function activateSlideshow(){for(var a,b=0;a=document.getElementsByTagName("link")[b];b++)if(-1!=a.getAttribute("rel").indexOf("style")){var c=a.getAttribute("title");if(c&&(a.disabled=!0,"Slideshow"==c))a.disabled=!1}SLIDESHOW_MODE=1;addMeta();setupFrames();updateSlides()}
function deactivateSlideshow(){for(var a=document.getElementsByTagName("link"),b,c=0;b=a[c];c++)if(-1!=b.getAttribute("rel").indexOf("style")){var d=b.getAttribute("title");if(d&&(b.disabled=!0,"All at once"==d))b.disabled=!1}curSlide=0;updateSlides();eraseHash();SLIDESHOW_MODE=0;rmMeta();a=document.querySelectorAll("iframe");for(c=0;b=a[c];c++)enableFrame(b)}
function addMeta(){var a=document.createElement("meta");a.name="viewport";a.content="width=1100,height=750";document.querySelector("head").appendChild(a)}function rmMeta(){for(var a=document.getElementsByTagName("meta"),b,c=0;b=a[c];c++)"viewport"==b.name&&document.querySelector("head").removeChild(b)}function makeBuildLists(){for(var a=0,b;b=slideEls[a];a++){b=b.querySelectorAll(".build > *");for(var c=0,d;d=b[c];c++)d.classList&&d.classList.add("to-build")}}
function handleDomLoaded(){slideEls=document.querySelectorAll("section.slides > article");addEventListeners();setupInteraction();makeBuildLists();getCurSlideFromHash();document.body.classList.add("loaded")}function initialize(){window._DCL?handleDomLoaded():document.addEventListener("DOMContentLoaded",handleDomLoaded,!1)}initialize();
